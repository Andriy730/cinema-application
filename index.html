<!DOCTYPE html>
<html lang="en">

    <head>
        <!-- Required meta tags always come first -->
        <meta charset="utf-8"/>
        <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no" />

        <!-- Bootstrap CSS -->
        <link rel="stylesheet" href="node_modules/bootstrap/dist/css/bootstrap.min.css">
        <link rel="stylesheet" href="node_modules/font-awesome/css/font-awesome.min.css">   
        <link rel="shortcut icon" href="images/icon.png" type="image/png">
        <!--<link href="style/project.css" rel="stylesheet" type="text/css">-->
        <link href="style/navbar.css" rel="stylesheet" type="text/css">
        <link href="style/project.css" rel="stylesheet" type="text/css">
        <link href="style/carousel.css" rel="stylesheet" type="text/css">
        <title>Cinema</title>
    </head>
    <body>
        <nav class="navbar navbar-dark navbar-expand-lg">
            <button class="navbar-toggler" type="button" data-toggle="collapse data-target="#Navbar">
                <span class="navbar-toggler-icon"></span>
            </button>
            <a class="col-4 col-md-1 navbar-brand mr-auto" href="#">Cinema</a>
            <div class="collapse navbar-collapse offset-1" id="Navbar">
                <ul class="navbar-nav mr-lg-auto">
                    <li class="nav-item mr-lg-4"><a class="nav-link nav-element" href="#">Зараз у кіно</a></li>
                    <li class="nav-item mr-lg-4"><a class="nav-link nav-element" href="filmsList.html">Скоро у прокаті</a></li>
                    <li class="nav-item mr-lg-4"><a class="nav-link nav-element" href="contacts.html">Контакти</a></li>
                </ul>
                <ul class="navbar-nav ml-auto">
                    <li class="nav-item my-auto mr-2"><span class="nav-element">Location</span><img class="arrow ml-2" src="images/arrow.png" height="30" width="30"></li>
                    <li class="nav-item">
                        <a class="nav-link nav-element login" href="login.html">Sign in<img class="user-icon" src="images/user-icon.png" height="30" width="30"></a>
                        <div class="dropdown-menu w-100" aria-labelledby="userDropdown">
                            <a class="dropdown-item" href="user.html">Profile</a>
                            <div class="dropdown-divider"></div>
                            <a class="dropdown-item" href="#" onclick="logout()">Logout</a>
                        </div>
                    </li>
                </ul>
            </div>
        </nav>
        
        <main>
            <div>
                <div id="posters" class="carousel slide multi-item-carousel w-100" data-ride="carousel">
                    <div class="carousel-inner w-100" role="listbox">
                        
                    </div>
                    <a class="carousel-control-prev" href="#posters" role="button" data-slide="prev">
                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    </a>
                    <a class="carousel-control-next" href="#posters" role="button" data-slide="next">
                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    </a>
                </div>
            </div>
        </main>
        
        <script src="node_modules/jquery/dist/jquery.slim.min.js"></script>
        <script src="node_modules/popper.js/dist/umd/popper.min.js"></script>
        <script src="node_modules/bootstrap/dist/js/bootstrap.min.js"></script>
        <script src="js/functions.js"></script>
        <script src="js/posters.js"></script>
        <script>
            var xhttp = new XMLHttpRequest();
            xhttp.onreadystatechange = function() {
                if(this.readyState == 4 && this.status == 200) {
                    var data = JSON.parse(this.response)
                    generatePosters(data);
                    setSize();
                }
            }
            addUserElement();
            xhttp.open("GET", "http://localhost:8080/movie/all/", true);
            xhttp.send();
       
            $(window).on('resize', setSize);
        </script>
        <script>
            $('.multi-item-carousel').on('slide.bs.carousel', function (e) {
                let $e = $(e.relatedTarget),
                    itemsPerSlide = 2;
                if($(window).width() > 767) {
                    itemsPerSlide = 4;
                }
                if($(window).width() > 991) {
                    itemsPerSlide = 5;
                }
                let totalItems = $('.carousel-item', this).length,
                    $itemsContainer = $('.carousel-inner', this),
                    it = itemsPerSlide - (totalItems - $e.index());
                
                if (it > 0) {
                    for (var i = 0; i < it; i++) {
                    $('.carousel-item', this).eq(e.direction == "left" ? i : 0).
                        // append slides to the end/beginning
                        appendTo($itemsContainer);
                    }
                }
            });
        </script>
        <script>
            $(function () {
                'use strict'

                $('[data-toggle="offcanvas"]').on('click', function () {
                    $('.offcanvas-collapse').toggleClass('open')
                })
            })
        </script>
    </body>

</html>
